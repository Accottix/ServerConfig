

jokercard:/jokercard = >>>

@magnitude = 2; // speed of falling block
@damage = 50; // amount of damage the block will do to other players

// get the starting location
@loc = ploc();
@loc['y'] += 2; // chest height

// get the vector from player yaw/pitch
@yaw = @loc['yaw'] + 90;
@pitch = neg(@loc['pitch']);
@vector = associative_array();
@vector['x'] = @magnitude * (cos(to_radians(@yaw)) * cos(to_radians(@pitch)));
@vector['y'] = @magnitude * sin(to_radians(@pitch));
@vector['z'] = @magnitude * (sin(to_radians(@yaw)) * cos(to_radians(@pitch)));

@id = spawn_falling_block(@loc, 339, @vector);

#@var = 0
#export('var',@var)

bind(entity_change_block, associative_array('id': 'magneto'.@id), associative_array('to': 339), 
        @event, @id, @damage, @player = player()) {
            
            @loc = entity_loc(@id);
            drop_item(@loc,array(type: 339, qty: 1))
            cancel()
            
}

set_interval(50, closure(){
    try {
        #@var = import('var')
        #if(@var < 3){
        #    @var = @var +1
        #    export('var',@var)
        #    return()
        #}
        @loc = entity_loc(@id);
        @loc['y'] -= 1; // so we detect if the block is at player chest height
        foreach(@p in entities_in_radius(@loc, 3)) {
            // apply damage to player's UUID and attribute it to current player
            if(is_entity_living(@p)){
                damage_entity(puuid(@p), @damage, puuid());
            }
        }
    } catch(Exception @ex) {
        // entity no longer exists, clear the interval
        clear_task();
        // unbind the landing event
        unbind('magneto'.@id);
    }});

<<<


associative_array(
            'id': '119',
            'name': '§fJo§2k§5er',
            'class': 'joker',
            'sig': 'AwQXimwxx8rTzOYRYqOVy03JYdNhKcjcc9TpQj+CybBC1Nf/mKV5kPk5AMpxPxA+DPvf+bxt4vdC5tUn+mQ8hvRymcidxr8ST4Ztdy6EYsmo3seAzONko3tSq4v5ccoSwVTbnj/6Hp5XYJMkBEik7Szm7rnz55dvl/MHTnc6TQ2dto9siCUu1GX35AqsiQHBBQ6XlKPAdegEWL8783aSs542Inad0uvq2b3nG3cnP1PXES6qCLxPKciKf+lwasIIqFyU+3qXIDxw8CsXpISGhvj/JQv+Snn5sjvWK/vSlxm3W1FRAZJSYdHAK0HkF7gOnHuoKYQ7eEe6LVmelQ71h6t3PpvGBXaV6wnetnCN9zv86SbOhiotOT+7FW0KVext6uY7XfLYPQj+ggLsIhKzFPw6RiCH7Xj2J8b3Gwo9spUGcFvfzLUMIv37Nob1b1QQ2jU2MZFVvCJSh7TOrzdKFrge1rG49CULt8wtwPI6PfOEVi+iXOpGVQinu+ANBDuMbR9dI5bkuFQ42vn01e0bIgbPJb12GjBjiWRmaZEODlzt31/EgOJHzcaRi5dLaUz9TmLn4XeVkczqy1SVwNCAfn8G8b5HlPreGGCDEL2NaRE1BfHzQ1fbvhJ/NI41yuimbfOxidw4cnQuqmq42Vjxqry46lQK9b7/Nsx21k7MtYY=',
            'val': 'eyJ0aW1lc3RhbXAiOjE0NzQ4MjU4NjQ2NjcsInByb2ZpbGVJZCI6Ijg3ZmIzYzZjNWZmNjRiZjZiMzI2OTkyYzYxMzdlYTEyIiwicHJvZmlsZU5hbWUiOiJUZWt0cm9uaWMiLCJzaWduYXR1cmVSZXF1aXJlZCI6dHJ1ZSwidGV4dHVyZXMiOnsiU0tJTiI6eyJ1cmwiOiJodHRwOi8vdGV4dHVyZXMubWluZWNyYWZ0Lm5ldC90ZXh0dXJlL2RlZjZhOGYwNjU4MDQwZTk0NmI4NjViYmU1ODdjYzVkZjYwMzVkM2MwOWQ1NDNmYjI5MzZiZjI3YWJkMzE4In19fQ==',
            'trail': '',
            'op': 'false',
            'speech': "I'm the Joker!",
            'powers': array(
                "/".@class,
                "/jump 0-1",
                "/run 0-2",
                "/haste 0-1"
            ),
            'buffs': array(
                "/shot give player() cakebomb"                
            )
        )